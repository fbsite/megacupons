<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üî• (HOJE) Cupons, Lojas e Ofertas REAIS | MegaCupons</title>
    <meta name="description" content="Economize AGORA! Pegue cupons, ofertas de produtos e campanhas 100% gr√°tis. Ofertas reais, atualizadas agora.">
    
    <meta property="og:title" content="üî• (HOJE) Cupons, Lojas e Ofertas REAIS | MegaCupons">
    <meta property="og:image" content="https://placehold.co/1200x630/FF3B80/FFFFFF?text=MegaCupons">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üî•</text></svg>">
    
    <!-- Fontes e √çcones -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

    <style>
        :root {
            --primary: #FF3B80;
            --secondary: #00BFA6;
            --warning: #FFA726;
            --bg: #121212;
            --surface: #1E1E1E;
            --text: #FFFFFF;
            --text-muted: #B0B0B0;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Inter', sans-serif; }
        body { background-color: var(--bg); color: var(--text); line-height: 1.6; padding-bottom: 80px; }
        
        /* Header */
        .header { background: var(--surface); border-bottom: 2px solid var(--primary); padding: 15px 0; position: sticky; top: 0; z-index: 100; }
        .container { width: 95%; max-width: 1100px; margin: 0 auto; }
        .nav-flex { display: flex; justify-content: space-between; align-items: center; }
        .logo { font-size: 1.6rem; font-weight: 900; color: var(--primary); text-decoration: none; }
        .navbar a { color: var(--text-muted); text-decoration: none; font-weight: 700; margin-left: 20px; transition: 0.3s; }
        .navbar a.active, .navbar a:hover { color: var(--text); }

        /* Hero */
        .hero { text-align: center; padding: 40px 0; background: linear-gradient(180deg, var(--surface) 0%, var(--bg) 100%); }
        .hero h1 { font-size: 2.2rem; font-weight: 900; line-height: 1.2; margin-bottom: 15px; }
        .hero-subtitle { font-size: 1.1rem; color: var(--text-muted); margin-bottom: 25px; }
        
        /* Timer */
        .countdown-title { color: var(--warning); text-transform: uppercase; font-size: 0.9rem; font-weight: 900; letter-spacing: 1px; margin-bottom: 10px; animation: blink 2s infinite; }
        .timer-box { display: flex; justify-content: center; gap: 10px; }
        .timer-block { background: var(--surface); border: 1px solid #333; padding: 10px; border-radius: 8px; min-width: 60px; }
        .timer-val { font-size: 1.8rem; font-weight: 900; color: var(--primary); display: block; line-height: 1; }
        .timer-label { font-size: 0.7rem; text-transform: uppercase; color: var(--text-muted); }
        @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0.7; } }

        /* Social Proof */
        .social-proof { background: var(--surface); padding: 20px 0; border-top: 1px solid #333; border-bottom: 1px solid #333; margin-top: 30px; }
        .proof-flex { display: flex; flex-wrap: wrap; justify-content: space-around; gap: 15px; text-align: center; }
        .proof-item { font-size: 0.9rem; color: var(--text-muted); }
        .proof-item strong { color: var(--text); }
        .proof-item i { color: var(--secondary); margin-right: 5px; }

        /* Lojas em Destaque */
        .featured-section { padding: 30px 0; text-align: center; }
        .stores-circles { display: flex; justify-content: center; gap: 15px; flex-wrap: wrap; margin-top: 20px; }
        .circle-link { text-decoration: none; color: var(--text-muted); transition: transform 0.3s; }
        .circle-link:hover { transform: scale(1.1); color: var(--text); }
        .circle-img { width: 70px; height: 70px; border-radius: 50%; background: #fff; border: 2px solid var(--primary); display: flex; align-items: center; justify-content: center; margin: 0 auto 5px; overflow: hidden; }
        .circle-img img { width: 80%; height: auto; object-fit: contain; }
        .view-all-btn { display: inline-block; margin-top: 20px; padding: 10px 20px; border: 1px solid var(--primary); color: var(--primary); border-radius: 20px; text-decoration: none; font-weight: 700; font-size: 0.9rem; }

        /* Cards Gerais */
        .section-title { font-size: 1.5rem; font-weight: 900; margin: 40px 0 20px; display: flex; align-items: center; gap: 10px; }
        
        /* Campanhas (Scroll Horizontal) */
        .scroll-grid { display: flex; overflow-x: auto; gap: 15px; padding-bottom: 15px; }
        .scroll-grid::-webkit-scrollbar { height: 6px; }
        .scroll-grid::-webkit-scrollbar-thumb { background: var(--primary); border-radius: 3px; }
        .camp-card { min-width: 260px; background: var(--surface); border-radius: 10px; overflow: hidden; border: 1px solid #333; text-decoration: none; color: white; transition: 0.3s; }
        .camp-card:hover { transform: translateY(-5px); }
        .camp-card img { width: 100%; height: 140px; object-fit: cover; border-bottom: 2px solid var(--primary); }
        .camp-content { padding: 15px; }

        /* Cupons Grid */
        .coupons-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px; }
        .coupon-card { background: var(--surface); border: 1px solid #333; border-radius: 12px; padding: 20px; position: relative; display: flex; flex-direction: column; }
        .badge { position: absolute; top: -10px; right: 10px; background: var(--warning); color: black; font-size: 0.7rem; font-weight: 900; padding: 4px 8px; border-radius: 4px; text-transform: uppercase; box-shadow: 0 2px 5px rgba(0,0,0,0.5); }
        .card-head { display: flex; gap: 15px; align-items: center; margin-bottom: 15px; }
        .card-logo { width: 60px; height: 60px; background: #fff; border-radius: 8px; padding: 5px; object-fit: contain; }
        .card-info h3 { font-size: 1.1rem; margin-bottom: 5px; line-height: 1.2; }
        .card-info p { color: var(--text-muted); font-size: 0.9rem; }
        .validity { font-size: 0.8rem; color: #777; margin-bottom: 15px; }
        
        /* Bot√£o Tesoura */
        .btn-wrapper { position: relative; height: 45px; cursor: pointer; margin-top: auto; }
        .btn-code { position: absolute; left: 0; width: 65%; height: 100%; background: #252525; border: 2px dashed #555; border-right: none; border-radius: 8px 0 0 8px; display: flex; align-items: center; justify-content: center; font-family: monospace; color: var(--text-muted); }
        .btn-action { position: absolute; right: 0; width: 35%; height: 100%; background: var(--primary); border-radius: 0 8px 8px 0; display: flex; align-items: center; justify-content: center; color: white; font-size: 1.2rem; transition: 0.3s; }
        .btn-wrapper:hover .btn-action { background: #ff1f6d; }

        /* Produtos */
        .products-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); gap: 15px; }
        .prod-card { background: var(--surface); border: 1px solid #333; border-radius: 10px; padding: 15px; text-align: center; text-decoration: none; color: white; transition: 0.3s; }
        .prod-card:hover { border-color: var(--secondary); }
        .prod-img { width: 100%; height: 150px; object-fit: contain; background: white; padding: 10px; border-radius: 5px; margin-bottom: 10px; }
        .prod-price { color: var(--secondary); font-weight: 900; font-size: 1.2rem; }

        /* Ads */
        .ad-space { width: 100%; max-width: 728px; height: 90px; border: 1px dashed #444; display: flex; align-items: center; justify-content: center; color: #444; margin: 30px auto; text-align: center; font-size: 0.8rem; }

        /* Footer */
        .footer { background: var(--surface); text-align: center; padding: 30px 0; margin-top: 40px; border-top: 1px solid #333; font-size: 0.9rem; color: var(--text-muted); }

        .loader { text-align: center; padding: 40px; color: var(--primary); }
        .hidden { display: none; }
    </style>
</head>
<body>

    <header class="header">
        <div class="container nav-flex">
            <a href="index.html" class="logo"><i class="fa-solid fa-rocket"></i> MegaCupons</a>
            <nav class="navbar">
                <a href="index.html" class="active">In√≠cio</a>
                <a href="stores.html">Lojas</a>
            </nav>
        </div>
    </header>

    <section class="hero">
        <div class="container">
            <h1>Sua Economia Come√ßa <span style="color: var(--primary);">AGORA!</span> <i class="fa-solid fa-bolt-lightning"></i></h1>
            <p class="hero-subtitle">Cupons, Ofertas e Campanhas reais, verificados e atualizados.</p>
            
            <div class="countdown-title">‚ö° Ofertas Rel√¢mpago terminam em:</div>
            <div class="timer-box">
                <div class="timer-block"><span class="timer-val" id="h">23</span><span class="timer-label">Horas</span></div>
                <div class="timer-block"><span class="timer-val" id="m">59</span><span class="timer-label">Min</span></div>
                <div class="timer-block"><span class="timer-val" id="s">45</span><span class="timer-label">Seg</span></div>
            </div>
        </div>
    </section>

    <section class="social-proof">
        <div class="container proof-flex">
            <div class="proof-item"><i class="fa-solid fa-users"></i> <strong>+15.480</strong> pessoas usaram hoje</div>
            <div class="proof-item"><i class="fa-solid fa-tags"></i> Cupons <strong>Ativos Agora</strong></div>
            <div class="proof-item"><i class="fa-solid fa-shield-halved"></i> <strong>100% Verificados</strong></div>
        </div>
    </section>

    <div class="container"><div class="ad-space">Publicidade (Leaderboard)</div></div>

    <section class="featured-section">
        <div class="container">
            <h2><i class="fa-solid fa-store" style="color: var(--secondary);"></i> Lojas em Destaque</h2>
            <div class="stores-circles" id="featured-stores">
                <!-- Carregado via JS para n√£o pesar o HTML -->
                <i class="fa-solid fa-spinner fa-spin" style="color:var(--primary)"></i>
            </div>
            <a href="stores.html" class="view-all-btn">Ver Todas as Lojas <i class="fa-solid fa-arrow-right"></i></a>
        </div>
    </section>

    <main class="container">
        
        <!-- Campanhas -->
        <h2 class="section-title"><i class="fa-solid fa-bullhorn" style="color: var(--warning);"></i> Campanhas Ativas</h2>
        <div id="loader-camp" class="loader"><i class="fa-solid fa-spinner fa-spin"></i></div>
        <div id="grid-camp" class="scroll-grid hidden"></div>

        <!-- Cupons -->
        <h2 class="section-title"><i class="fa-solid fa-fire" style="color: var(--primary);"></i> Top Cupons Verificados</h2>
        <div id="loader-coupons" class="loader"><i class="fa-solid fa-circle-notch fa-spin"></i> Buscando ofertas reais...</div>
        <div id="grid-coupons" class="coupons-grid hidden"></div>

        <!-- An√∫ncio Meio -->
        <div class="ad-space">Publicidade (In-Feed)</div>

        <!-- Produtos -->
        <h2 class="section-title"><i class="fa-solid fa-bag-shopping" style="color: var(--secondary);"></i> Ofertas de Produtos</h2>
        <div id="loader-prod" class="loader"><i class="fa-solid fa-spinner fa-spin"></i></div>
        <div id="grid-prod" class="products-grid hidden"></div>

    </main>

    <footer class="footer">
        <div class="container">
            <p>MegaCupons &copy; <span id="year"></span> - Todos os direitos reservados.</p>
            <p>Economia real, 100% gr√°tis e verificada para voc√™.</p>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            document.getElementById('year').textContent = new Date().getFullYear();
            startTimer();
            loadDestaques();
            loadAllData();
        });

        async function loadAllData() {
            // Carrega Dados Reais da API
            try {
                const [resCoupons, resCamp, resProd] = await Promise.all([
                    fetch('/api/coupons'),
                    fetch('/api/campaigns'),
                    fetch('/api/products')
                ]);

                if(resCoupons.ok) renderCoupons(await resCoupons.json());
                if(resCamp.ok) renderCampaigns(await resCamp.json());
                if(resProd.ok) renderProducts(await resProd.json());

            } catch (error) {
                console.error("Erro:", error);
                // Em produ√ß√£o o usu√°rio n√£o v√™ erro, apenas os loaders somem ou mostram vazio
            }
        }

        function loadDestaques() {
            // 8 Lojas em Destaque
            const lojas = [
                {name: 'Amazon', img: 'https://logo.clearbit.com/amazon.com.br', link: '#'},
                {name: 'Magalu', img: 'https://logo.clearbit.com/magazineluiza.com.br', link: '#'},
                {name: 'Americanas', img: 'https://logo.clearbit.com/americanas.com.br', link: '#'},
                {name: 'Nike', img: 'https://logo.clearbit.com/nike.com.br', link: '#'},
                {name: 'Shopee', img: 'https://logo.clearbit.com/shopee.com.br', link: '#'},
                {name: 'Casas Bahia', img: 'https://logo.clearbit.com/casasbahia.com.br', link: '#'},
                {name: 'Netshoes', img: 'https://logo.clearbit.com/netshoes.com.br', link: '#'},
                {name: 'AliExpress', img: 'https://logo.clearbit.com/aliexpress.com', link: '#'}
            ];
            const container = document.getElementById('featured-stores');
            container.innerHTML = '';
            lojas.forEach(l => {
                container.innerHTML += `
                    <a href="${l.link}" class="circle-link">
                        <div class="circle-img"><img src="${l.img}" onerror="this.src='https://placehold.co/50'"></div>
                        <div style="font-size:0.8rem; font-weight:bold;">${l.name}</div>
                    </a>
                `;
            });
        }

        function renderCoupons(data) {
            const grid = document.getElementById('grid-coupons');
            document.getElementById('loader-coupons').classList.add('hidden');
            grid.classList.remove('hidden');

            const date = new Date();
            date.setDate(date.getDate() + 7);
            const validStr = date.toLocaleDateString('pt-BR', {day:'2-digit', month:'2-digit'});

            data.forEach(c => {
                let btnHtml = '';
                if(c.code) {
                    const hiddenCode = c.code.substring(0, 3) + "***";
                    btnHtml = `
                        <div class="btn-wrapper" onclick="copyAndGo('${c.code}', '${c.link}', this)">
                            <div class="btn-code">${hiddenCode}</div>
                            <div class="btn-action"><i class="fa-solid fa-scissors" style="transform: rotate(-90deg);"></i></div>
                        </div>`;
                } else {
                    btnHtml = `
                        <a href="${c.link}" target="_blank" class="btn-wrapper" style="text-decoration:none; display:block;">
                            <div class="btn-code" style="width:100%; background:var(--secondary); color:black; font-weight:bold; border:none; border-radius:8px;">
                                ATIVAR OFERTA <i class="fa-solid fa-arrow-right" style="margin-left:5px"></i>
                            </div>
                        </a>`;
                }

                grid.innerHTML += `
                    <article class="coupon-card">
                        ${c.exclusive ? '<div class="badge">EXCLUSIVO</div>' : ''}
                        <div class="card-head">
                            <img src="${c.logo}" class="card-logo" onerror="this.src='https://placehold.co/60'">
                            <div class="card-info">
                                <h3>${c.title}</h3>
                                <p>${c.store}</p>
                            </div>
                        </div>
                        <div style="font-size:0.9rem; color:#ccc; margin-bottom:10px; flex-grow:1;">${c.desc}</div>
                        <div class="validity"><i class="fa-regular fa-clock"></i> V√°lido at√©: ${validStr}</div>
                        ${btnHtml}
                    </article>
                `;
            });
        }

        function renderCampaigns(data) {
            const grid = document.getElementById('grid-camp');
            document.getElementById('loader-camp').classList.add('hidden');
            grid.classList.remove('hidden');
            data.forEach(c => {
                grid.innerHTML += `
                    <a href="${c.link || '#'}" class="camp-card">
                        <img src="${c.img}" loading="lazy">
                        <div class="camp-content">
                            <div style="font-weight:bold; font-size:0.9rem;">${c.title}</div>
                            <div style="color:var(--secondary); font-size:0.8rem;">Ver cole√ß√£o <i class="fa-solid fa-arrow-right"></i></div>
                        </div>
                    </a>
                `;
            });
        }

        function renderProducts(data) {
            const grid = document.getElementById('grid-prod');
            document.getElementById('loader-prod').classList.add('hidden');
            grid.classList.remove('hidden');
            data.forEach(p => {
                grid.innerHTML += `
                    <a href="${p.link}" target="_blank" class="prod-card">
                        <img src="${p.img}" class="prod-img" loading="lazy">
                        <h4 style="font-size:0.9rem; margin-bottom:5px; height:2.4em; overflow:hidden;">${p.name}</h4>
                        <div class="prod-price">R$ ${p.price}</div>
                        <div style="margin-top:10px; font-size:0.8rem; color:var(--secondary);">VER OFERTA</div>
                    </a>
                `;
            });
        }

        function copyAndGo(code, link, el) {
            navigator.clipboard.writeText(code).then(() => {
                const codeEl = el.querySelector('.btn-code');
                const actionEl = el.querySelector('.btn-action');
                codeEl.innerText = code;
                codeEl.style.color = "var(--secondary)";
                actionEl.innerHTML = '<i class="fa-solid fa-check"></i>';
                actionEl.style.background = "var(--secondary)";
                setTimeout(() => { window.open(link, '_blank'); }, 800);
            });
        }

        function startTimer() {
            setInterval(() => {
                const now = new Date();
                let h = 23 - now.getHours();
                let m = 59 - now.getMinutes();
                let s = 59 - now.getSeconds();
                document.getElementById('h').innerText = h.toString().padStart(2,'0');
                document.getElementById('m').innerText = m.toString().padStart(2,'0');
                document.getElementById('s').innerText = s.toString().padStart(2,'0');
            }, 1000);
        }
    </script>
    <script src="https://www.dwin2.com/pub.2589771.min.js"></script>
</body>
</html>